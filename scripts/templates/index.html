<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Editor Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <header class="mb-12 text-center">
            <h1 class="text-3xl font-bold mb-2">Math Editor Blog</h1>
            <p class="text-lg text-gray-600">Latest posts from Math Editor</p>
            <div class="mt-4">
                <a href="rss.xml" class="text-orange-600 hover:text-orange-700 flex items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="6.18" cy="17.82" r="2.18"/>
                        <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
                    </svg>
                    RSS Feed
                </a>
            </div>
        </header>
        
        <main>
            <div class="mb-8 p-6 bg-white rounded-lg shadow">
                <h2 class="text-2xl font-semibold mb-2">Blog Content</h2>
                <p class="text-gray-700">
                    This is a static blog export from Math Editor. The full blog content 
                    is available through the RSS feed, which can be viewed in any RSS reader.
                </p>
                <div class="mt-4">
                    <p class="text-gray-600">
                        For the full interactive experience, please visit the main Math Editor site.
                    </p>
                </div>
            </div>
            
            <div id="posts" class="space-y-6">
                <!-- Posts will be loaded from the RSS feed via JavaScript -->
                <p class="text-gray-500 italic">Loading posts...</p>
            </div>
        </main>
        
        <footer class="mt-12 pt-6 border-t border-gray-200 text-gray-600">
            <p>Â© 2025 Math Editor</p>
        </footer>
    </div>

    <script>
        // Simple script to parse the RSS feed and display posts
        fetch('rss.xml')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Failed to load RSS feed');
                }
                return response.text();
            })
            .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
            .then(data => {
                const items = data.querySelectorAll("item");
                const postsContainer = document.getElementById('posts');
                
                if (items.length === 0) {
                    postsContainer.innerHTML = '<p class="text-gray-500 italic">No posts available yet.</p>';
                    return;
                }
                
                postsContainer.innerHTML = '';
                
                items.forEach(item => {
                    const title = item.querySelector("title").textContent;
                    const link = item.querySelector("link").textContent;
                    const pubDate = new Date(item.querySelector("pubDate").textContent);
                    // Extract the handle from the URL
                    const urlParts = link.split('/');
                    const handle = urlParts[urlParts.length - 1];
                    
                    const postHTML = `
                        <article class="p-6 bg-white rounded-lg shadow">
                            <h2 class="text-xl font-semibold mb-2">
                                <a href="${handle}/index.html" class="text-blue-700 hover:underline">${title}</a>
                            </h2>
                            <div class="text-gray-500 text-sm">
                                ${pubDate.toLocaleDateString('en-US', {
                                    year: 'numeric',
                                    month: 'long',
                                    day: 'numeric'
                                })}
                            </div>
                        </article>
                    `;
                    
                    postsContainer.innerHTML += postHTML;
                });
            })
            .catch(error => {
                console.error('Error fetching RSS feed:', error);
                document.getElementById('posts').innerHTML = 
                    '<p class="text-red-500">Error loading posts. Please check the RSS feed.</p>';
            });
    </script>
</body>
</html>
